(function(a,b){'object'==typeof exports&&'object'==typeof module?module.exports=b():'function'==typeof define&&define.amd?define([],b):'object'==typeof exports?exports.ChooseBumps=b():a.ChooseBumps=b()})(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=0)}([function(a,b,c){'use strict';function d(a,b){function c(a){a='boolean'==typeof a?a:!F,!0===a?(u(),A.classList.add('cb-active'),B.scrollTop=0,document.addEventListener('click',c),document.addEventListener('keydown',g),document.addEventListener('keyup',f),o(),F=!0):(n(),A.classList.remove('cb-active'),document.removeEventListener('click',c),document.removeEventListener('keydown',g),document.removeEventListener('keyup',f),O=null,F=!1)}function f(a){27===a.keyCode&&c(!1)}function g(a){switch(/38|40|13/.test(a.keyCode)&&a.preventDefault(),a.keyCode){case 38:a.preventDefault(),j();break;case 40:a.preventDefault(),i();break;case 13:if('function'==typeof R&&-1===O)return R(a.target.value),a.target.value='';if(void 0===O||null==O||0>O)return c();m(Y[parseInt(B.children[O].getAttribute('data-id'),10)],!0),O=null;}}function h(a,b,c){c&&c.stopPropagation(),E&&E.constructor===Array?(E.splice(E.indexOf(a),1),!E.length&&(E=null)):E=null,E||A.querySelector('.cb-main-item').classList.add('cb-placeholder'),S&&b&&S(a),r(),u()}function i(){null==O&&(O=-1);var a=B.children.length-1;O=O<a?O+1:a,l()}function j(){B.children.length-1;O=O?O-1:null,l()}function k(){if(O&&!(0>O)){var a=B.children[O],b=B.scrollTop,c=B.scrollTop+B.clientHeight,d=a.offsetTop,e=a.offsetTop+a.clientHeight;d<b?B.scrollTop=a.offsetTop:e>c&&(B.scrollTop=e-B.clientHeight)}}function l(){var a=B.querySelector('.cb-selected');a&&a.classList.remove('cb-selected');var b=B.children[O];b&&b.classList.add('cb-selected'),k()}function m(a,b,d){A.querySelector('.cb-main-item').classList.remove('cb-placeholder'),n(),J?((!E||!E.reduce(function(b,c){return b||x(a,c)},!1))&&(E?E.push(a):E=[a]),u(),d&&d.stopPropagation(),o()):(E=a,c(!1)),P&&b&&P(a),r()}function n(){D&&(A.querySelector('.cb-search').value='')}function o(){D&&A.querySelector('.cb-search').focus()}function p(a,b){function c(a){return Object.keys(a).reduce(function(b,f){var g=!1;return g='object'===e(a[f])?c(a[f]):d.test(a[f]),g&&(b=!0),b},!1)}var d=new RegExp(a,'i');/{{.*}}/gi.test(V)?s(V.replace(/{{query}}/,a),b):W?(t(!0),W(a,function(a){b(Q?Q(a):a),t(!1)})):b(Y.filter(function(a){if(G){var b=!1;return G.split(' ').forEach(function(c){var e=c.split('.'),f=e.reduce(function(a,b){return a[b]},a);d.test(f)&&(b=!0)}),b}return'string'==typeof a?d.test(a):c(a)}))}function q(){var a=document.createElement('div');a.className='cb-main-item cb-placeholder trigger';a.innerHTML+='<svg class="cb-caret trigger" viewBox="0 0 512 512" height="20" width="20">\n\t\t\t\t\t\t<path class="trigger" d="m508 108c-4-4-11-4-15 1l-237 271l-237-271c-4-5-11-5-15-1c-5 4-5 10-1 15l245 280c2 3 5 4 8 4c3 0 6-1 8-4l245-280c4-5 4-11-1-15z"></path>\n\t\t\t\t\t</svg>',A.appendChild(a),B=document.createElement('div'),B.className='cb-items',A.appendChild(B),C=document.createElement('div'),C.className='cb-loader',A.appendChild(C),a.addEventListener('click',function(a){a.stopPropagation(),c(!F)}),A.addEventListener('keypress',function(a){13===a.keyCode&&c()})}function r(){var a=A.querySelector('.cb-main-item');if(J){if([].slice.call(A.querySelectorAll('.cb-main-item .cb-tag')).forEach(function(b){a.removeChild(b)}),!E)return;E.forEach(function(b){var c=document.createElement('div');c.className='cb-tag',c.innerHTML=v(b,M||L)+'<svg viewBox="0 0 512 512">\n\t\t\t\t\t\t<path d="m271 256l238-238c4-4 4-11 0-15c-4-4-11-4-15 0l-238 238l-238-238c-4-4-11-4-15 0c-4 4-4 11 0 15l238 238l-238 238c-4 4-4 11 0 15c2 2 5 3 8 3c2 0 5-1 7-3l238-238l238 238c2 2 5 3 7 3c3 0 6-1 8-3c4-4 4-11 0-15z"></path>\n\t\t\t\t\t</svg>',c.querySelector('svg').addEventListener('click',h.bind(null,b,!0)),a.insertBefore(c,a.children[a.children.length-1])})}else{if(!E)return[].slice.call(a.querySelectorAll('.cb-selected-item,.cb-tag')).forEach(function(b){return a.removeChild(b)});var b=document.createElement('div');b.className='cb-selected-item',b.innerHTML=v(E,N||L);var c=A.querySelector('.cb-selected-item');c&&a.removeChild(c),a.insertBefore(b,a.children[a.children.length-1])}}function s(a,b){U&&(U.abort(),t(!1)),U=new XMLHttpRequest,U.open('GET',a),U.onreadystatechange=function(){4==this.readyState&&(t(!1),200<=this.status&&400>this.status?(b(Q?Q(JSON.parse(this.responseText)):JSON.parse(this.responseText)),U=null):(b([]),U=null))},U.send(),t(!0)}function t(a){a?(C.style.display='block',A.querySelector('.cb-caret').style.display='none'):(C.style.display='',A.querySelector('.cb-caret').style.display='')}function u(a){B.innerHTML='',K&&(Y=Y.sort(function(c,a){return w(K,c)<w(K,a)?-1:w(K,c)>w(K,a)?1:0}));var b=null;Y.forEach(function(c,d){if(!(a&&0>a.indexOf(c))&&!(J&&E&&E.reduce(function(a,b){return a||x(c,b)},!1)||!J&&E===c)){var e=document.createElement('div');e.setAttribute('data-id',d),e.innerHTML=v(c,L),e.addEventListener('click',m.bind(null,c,!0)),K&&(!b||w(K,b)!==w(K,c))&&e.setAttribute('category',w(K,c)),b=c,B.appendChild(e)}})}function v(a,b){for(var c,d=/{{data\.?(.+?)?}}/;c=d.exec(b);){var e='',f=a;c[1]&&(e='.'+c[1],f=w(c[1],a));var g=new RegExp('{{data'+e+'}}');b=b.replace(g,f)}return b}function w(a,b){return a.split('.').reduce(function(a,b){return a[b]},b)}function x(c,d){if('object'!==('undefined'==typeof c?'undefined':e(c))&&'object'!==('undefined'==typeof d?'undefined':e(d)))return c===d;var f=Object.getOwnPropertyNames(c),g=Object.getOwnPropertyNames(d);if(f.length!==g.length)return!1;for(var h,j=0;j<f.length;j++)if(h=f[j],c[h]!==d[h])return!1;return!0}function y(){if(E&&E.constructor===Array){var a=E.slice();a.forEach(function(a){h(a,!0)})}else h(E,!0);n()}function z(a){for(var b in Z)this[b]=a[b]?a[b]:Z[b]}if(!1==this instanceof d)return new d(a,b);var A=null,B=null,C=null,D=!1,E=null,F=!1,G=null,H=null,I=null,J=!1,K=null,L='',M=null,N=null,O=null,P=null,Q=null,R=null,S=null,T=null,U=null,V=null,W=null,X=0,Y=[],Z={placeholder:'Choose',items:[],search:!1,searchfields:'',noresults:'',multiple:!1,template:'{{data}}',tagtemplate:null,selectedtemplate:null,categorize:null,processing:null,minlength:null,onselect:null,onremove:null,onadd:null};return Object.defineProperties(this,{element:{get:function(){return A},set:function(a){if('string'==typeof a){var b=document.querySelector(a);b?A=b:console.error('Element not found.')}else a instanceof HTMLElement?A=a:console.error('Invalid argument')}},items:{get:function(){return V||W||Y},set:function(a){a instanceof Array?Y=a:'string'==typeof a?(V=a,!/{{.*}}/gi.test(V)&&s(V,function(a){Y=a})):'function'==typeof a?(W=a,t(!0),W(null,function(a){Y=a instanceof Array?Q?Q(a):a:[],t(!1)})):console.error('Items must be an array or URL.')}},minlength:{get:function(){return X},set:function(a){X=isNaN(a)?0:a}},search:{get:function(){return D},set:function(a){if(D=!!a,D){A.classList.add('cb-search-enabled');var b=document.createElement('input');b.className='cb-search',b.setAttribute('type','text'),b.setAttribute('size',1),b.setAttribute('autocomplete','off'),b.addEventListener('keyup',function(a){B.removeAttribute('no-results-text'),!1===/38|40|13/.test(a.keyCode)&&this.value.length>=X&&(T&&clearTimeout(T),T=setTimeout(function(){p(b.value,function(a){/{{.*}}/gi.test(V)&&(Y=a),W&&(Y=a),!Y.length&&I&&B.setAttribute('no-results-text',I.replace('{{query}}',b.value)),u(a),O=null,i()})},200))}),b.addEventListener('keypress',function(){this.setAttribute('size',this.value.length+1)}),A.querySelector('.cb-main-item').appendChild(b)}else A.classList.remove('cb-search-enabled')}},placeholder:{get:function(){return H},set:function(a){return'string'==typeof a?void(H=a,A.querySelector('.cb-main-item').setAttribute('placeholder',H)):console.error('Placeholder must be a string.')}},noresults:{get:function(){return I},set:function(a){I='string'==typeof a?a:null}},multiple:{get:function(){return J},set:function(a){J=!!a,J&&'object'===('undefined'==typeof E?'undefined':e(E))&&E&&(E=[E])}},selected:{get:function(){return E}},template:{get:function(){return L},set:function(a){'string'==typeof a?(L=a,u(),r()):console.error('Template must be a string.')}},tagtemplate:{get:function(){return M||L},set:function(a){'string'==typeof a&&(M=a,u(),r())}},selectedtemplate:{get:function(){return N||L},set:function(a){'string'==typeof a&&(N=a,u(),r())}},searchfields:{get:function(){return G},set:function(a){'string'==typeof a?G=a:console.error('SearchFields must be a string.')}},onselect:{get:function(){return P},set:function(a){'function'==typeof a?P=a:!a&&(P=null)}},processing:{get:function(){return Q},set:function(a){'function'==typeof a?Q=a:!a&&(Q=null)}},onremove:{get:function(){return S},set:function(a){'function'==typeof a?S=a:!a&&(S=null)}},onadd:{get:function(){return R},set:function(a){'function'==typeof a?R=a:!a&&(R=null)}},categorize:{get:function(){return K},set:function(a){K='string'==typeof a?a:null,u()}}}),this.select=function(a){if(!a)return y();V&&/{{.*}}/gi.test(V)&&(Y=[a]);var b=Y.length?Y.reduce(function(b,c){return b=x(a,c)?c:b},null):a;b&&m(b)},this.remove=function(a){if(!a)return y();var b=Y.reduce(function(b,c){return b=x(a,c)?c:b},null);b&&h(b,!0)},this.reset=y,function(){this.element=a,A.classList.add('choosebumps'),A.setAttribute('tabindex',0),A.getAttribute('placeholder')&&(Z.placeholder=A.getAttribute('placeholder')),q(),z.call(this,b||{})}.call(this),Object.freeze(this)}Object.defineProperty(b,'__esModule',{value:!0});var e='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a};c(1),b.default=d},function(){}])['default']});